!function(o){o.module("Jsonapi.config",[]).constant("rsJsonapiConfig",{url:"http://yourdomain/api/v1/"}),o.module("Jsonapi.services",[]),o.module("rsJsonapi",["angular-storage","Jsonapi.config","Jsonapi.services"])}(angular);
var Jsonapi;!function(e){var t=function(){function t(e,t,n){this.$http=e,this.rsJsonapiConfig=t,this.$q=n}return t.$inject=["$http","rsJsonapiConfig","$q"],t.prototype["delete"]=function(e){return this.exec(e,"DELETE")},t.prototype.get=function(e){return this.exec(e,"GET")},t.prototype.exec=function(t,n,o){var i={method:n,url:this.rsJsonapiConfig.url+t,headers:{"Content-Type":"application/vnd.api+json"}};o&&(i.data=o);var r=this.$http(i),s=this.$q.defer();return e.Core.Me.refreshLoadings(1),r.then(function(t){e.Core.Me.refreshLoadings(-1),s.resolve(t)},function(t){e.Core.Me.refreshLoadings(-1),s.reject(t)}),s.promise},t}();e.Http=t,angular.module("Jsonapi.services").service("JsonapiHttp",t)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(t){var n=function(){function t(){this.paths=[],this.includes=[]}return t.prototype.addPath=function(t){this.paths.push(t)},t.prototype.setInclude=function(t){this.includes=t},t.prototype.get=function(){var t=[];return this.includes.length>0&&t.push("include="+this.includes.join(",")),this.paths.join("/")+(t.length>0?"/?"+t.join("&"):"")},t}();t.PathMaker=n}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(e){var r=function(){function r(){}return r.json_array2resources_array=function(r,n,t){void 0===t&&(t=!1),n||(n=[]);for(var i=0,a=0,o=r;a<o.length;a++){var u=o[a],s=e.Converter.json2resource(u,!1);t?n[s.id]=s:n[s.type+"_"+s.id]=s,i++}return n},r.json_array2resources_array_by_type=function(e,n){var t={};r.json_array2resources_array(e,t,!1);var i={};return angular.forEach(t,function(e){e.type in i||(i[e.type]={}),i[e.type][e.id]=e}),i},r.json2resource=function(r,n){var t=e.Converter.getService(r.type);if(t)return e.Converter.procreate(t,r);console.warn("`"+r.type+"`","service not found on json2resource()");var i=new e.Resource;return i.id=r.id,i.type=r.type,i},r.getService=function(r){var n=e.Core.Me.getResource(r);return angular.isUndefined(n)&&console.warn("`"+r+"`","service not found on getService()"),n},r.procreate=function(e,r){"type"in r&&"id"in r||console.error("Jsonapi Resource is not correct",r);var n=new e.constructor;return n["new"](),n.id=r.id,n.attributes=r.attributes?r.attributes:{},n.is_new=!1,n},r.build=function(e,n,t){var i={};"included"in e&&(i=r.json_array2resources_array_by_type(e.included,!1)),angular.isArray(e.data)?r._buildResources(e,n,t,i):r._buildResource(e.data,n,t,i)},r._buildResources=function(n,t,i,a){for(var o=0,u=n.data;o<u.length;o++){var s=u[o],c=e.Converter.getService(s.type);t[s.id]=new c.constructor,r._buildResource(s,t[s.id],i,a)}},r._buildResource=function(e,n,t,i){n.attributes=e.attributes,n.id=e.id,n.is_new=!1,r.__buildRelationships(e.relationships,n.relationships,i,t)},r.__buildRelationships=function(n,t,i,a){angular.forEach(n,function(n,o){if(!(o in t)&&"data"in n&&(t[o]={data:[]}),n.data)if(a.relationships[o]&&a.relationships[o].hasMany){if(n.data.length<1)return;var u=e.Converter.getService(n.data[0].type);u&&(t[o].data={},angular.forEach(n.data,function(e){var n=r.__buildRelationship(e,i);t[o].data[n.id]=n}))}else t[o].data=r.__buildRelationship(n.data,i)})},r.__buildRelationship=function(e,r){return e.type in r&&e.id in r[e.type]?r[e.type][e.id]:e},r}();e.Converter=r}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(s){var o=function(){function o(o,e){this.rsJsonapiConfig=o,this.JsonapiCoreServices=e,this.rootPath="http://reyesoft.ddns.net:9999/api/v1/companies/2",this.resources=[],this.loadingsCounter=0,this.loadingsStart=function(){},this.loadingsDone=function(){},s.Core.Me=this,s.Core.Services=e}return o.$inject=["rsJsonapiConfig","JsonapiCoreServices"],o.prototype._register=function(s){return s.type in this.resources?!1:(this.resources[s.type]=s,!0)},o.prototype.getResource=function(s){return this.resources[s]},o.prototype.refreshLoadings=function(s){this.loadingsCounter+=s,0===this.loadingsCounter?this.loadingsDone():1===this.loadingsCounter&&this.loadingsStart()},o.Me=null,o.Services=null,o}();s.Core=o,angular.module("Jsonapi.services").service("JsonapiCore",o)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(t){var e=function(){function e(){this.path=null,this.params_base={id:"",include:[]},this.schema_base={attributes:{},relationships:{}},this.is_new=!0,this.relationships=[]}return e.prototype.clone=function(){var t=new this.constructor;for(var e in this)"object"!=typeof this[e]&&(t[e]=this[e]);return t},e.prototype.register=function(){if(null===t.Core.Me)throw"Error: you are trying register --> "+this.type+" <-- before inject JsonapiCore somewhere, almost one time.";return t.Core.Me._register(this)},e.prototype.getPath=function(){return this.path?this.path:this.type},e.prototype["new"]=function(){var t=this.clone();return t.reset(),t},e.prototype.reset=function(){var t=this;this.id="",this.attributes={},this.relationships={},angular.forEach(this.schema.relationships,function(e,a){t.relationships[a]={},t.relationships[a].data={}}),this.is_new=!0},e.prototype.toObject=function(t){var e=this;t=angular.extend({},this.params_base,t),this.schema=angular.extend({},this.schema_base,this.schema);var a={},i=[],n=[];angular.forEach(this.relationships,function(s,r){if(e.schema.relationships[r]&&e.schema.relationships[r].hasMany)a[r]={data:[]},angular.forEach(s.data,function(e){var s={id:e.id,type:e.type};a[r].data.push(s);var o=e.type+"_"+e.id;-1===n.indexOf(o)&&-1!==t.include.indexOf(r)&&(n.push(o),i.push(e.toObject({}).data))});else{"id"in s.data||console.warn(r+" defined with hasMany:false, but I have a collection"),a[r]={data:{id:s.data.id,type:s.data.type}};var o=s.data.type+"_"+s.data.id;-1===n.indexOf(o)&&-1!==t.include.indexOf(s.data.type)&&(n.push(o),i.push(s.data.toObject({}).data))}});var s={data:{type:this.type,id:this.id,attributes:this.attributes,relationships:a}};return i.length>0&&(s.included=i),s},e.prototype.get=function(t,e,a,i){return this.__exec(t,e,a,i,"get")},e.prototype["delete"]=function(t,e,a,i){this.__exec(t,e,a,i,"delete")},e.prototype.all=function(t,e,a){return this.__exec(null,t,e,a,"all")},e.prototype.save=function(t,e,a){return this.__exec(null,t,e,a,"save")},e.prototype.__exec=function(t,e,a,i,n){switch(angular.isFunction(e)?(i=a,a=e,e=this.params_base):e=angular.isUndefined(e)?this.params_base:angular.extend({},this.params_base,e),a=angular.isFunction(a)?a:function(){},i=angular.isFunction(i)?i:function(){},this.schema=angular.extend({},this.schema_base,this.schema),n){case"get":return this._get(t,e,a,i);case"delete":return this._get(t,e,a,i);case"all":return this._all(e,a,i);case"save":return this._save(e,a,i)}},e.prototype._get=function(e,a,i,n){var s=this,r=new t.PathMaker;r.addPath(this.getPath()),r.addPath(e),a.include?r.setInclude(a.include):null;var o=this["new"]();return t.Core.Services.JsonapiHttp.get(r.get()).then(function(e){t.Converter.build(e.data,o,s.schema),i(e)},function(t){n(t)}),o},e.prototype._all=function(e,a,i){var n=this,s=new t.PathMaker;s.addPath(this.getPath()),e.include?s.setInclude(e.include):null;var r={};return t.Core.Services.JsonapiHttp.get(s.get()).then(function(e){t.Converter.build(e.data,r,n.schema),a(e)},function(t){i(t)}),r},e.prototype._delete=function(e,a,i,n){var s=new t.PathMaker;s.addPath(this.getPath()),s.addPath(e),t.Core.Services.JsonapiHttp["delete"](s.get()).then(function(t){i(t)},function(t){n(t)})},e.prototype._save=function(e,a,i){var n=this.toObject(e),s=new t.PathMaker;s.addPath(this.getPath()),this.id&&s.addPath(this.id),e.include?s.setInclude(e.include):null;var r=this["new"](),o=t.Core.Services.JsonapiHttp.exec(s.get(),this.id?"PUT":"POST",n);return o.then(function(t){var e=t.data.data;r.attributes=e.attributes,r.id=e.id,a(t)},function(t){i("data"in t?t.data:t)}),r},e.prototype.addRelationship=function(t,e){e=e?e:t.type,e in this.relationships||(this.relationships[e]={data:{}});var a=t.id;a||(a="new_"+Math.floor(1e5*Math.random())),this.relationships[e].data[a]=t},e.prototype.getService=function(){return t.Converter.getService(this.type)},e}();t.Resource=e}(Jsonapi||(Jsonapi={}));

var Jsonapi;!function(i){var n=function(){function i(i){this.JsonapiHttp=i}return i.$inject=["JsonapiHttp"],i}();i.CoreServices=n,angular.module("Jsonapi.services").service("JsonapiCoreServices",n)}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(n){var o=function(){function n(){}return n.prototype.toObject=function(n){return n},n}();n.JsonapiParser=o}(Jsonapi||(Jsonapi={}));
var Jsonapi;!function(n){var o=function(){function n(){}return n.prototype.get=function(n){},n.prototype.merge=function(n,o){},n}();n.JsonapiStorage=o}(Jsonapi||(Jsonapi={}));